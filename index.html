<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Главная</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"> -->
</head>

<body>
    <header>
        <a href="/" class="logo"><img src="img/logo.svg" alt=""></a>
    </header>
    <form action="" class="enter">
        <h2>Вход в кабинет пользователя</h2>
        <p class="active btn_hide topP">
            На ваш телефон +38 (099) 4хх хх 37 отправлен СМС с кодом подтверждения
        </p>
        <div class="input__wrap">
            <input type="text" placeholder="Введите свой ИНН" class="inp inpValid">
            <label class="error" for="">Поле обязательно для заполнения</label>
            <label for="" class="change">Введите свой ИНН</label>
            <label for="" class="sucses">Введите свой ИНН</label>
            <label class="sms">Код из СМС</label>
        </div>
        <div class="input__wrap change" class="">
            <input type="text" class="inp">
            <label class="change">Код из СМС</label>
        </div>
        <button class="btn">Получить код входа</button>
        <button class="btn btn__hide">Войти</button>
        <button class="btn2 btn__hide active">Отправить код повторно</button>
        <div class="info active"><img src="img/check.svg" alt=""> СМС код отправлен повторно</div>
        <div class="danger active"><img src="img/atten.svg" alt=""> Введенный вами ИНН отсутствует в базе. проверьте правильность ввода</div>
        <p class="active btn_hide bootomP">
            Если вы не получили код подтверждения, 
            обратитесь <a href="">в службу поддержки</a>
        </p>
    </form>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <!-- https://developers.google.com/speed/libraries/  actual version -->
    <script>
 $(document).ready(function(){

        ////////////////Валидация формы////////////////////////\
        const form = document.querySelector('.enter');
            let inputs = form.elements;
            const inp = document.querySelectorAll('.inpValid')
            form.addEventListener('focusin', function(e) {
                if( e.target.closest('.input__wrap').classList.contains('activesms')) {return}
                if(e.target.classList.contains('inpValid')) {
                    
                    e.target.closest('.input__wrap').classList.remove('sucses');
                    e.target.closest('.input__wrap').classList.remove('error');
                    e.target.closest('.input__wrap').classList.add('change')                  
                }  
            })
            form.addEventListener('focusout', function(e) {
                if( e.target.closest('.input__wrap').classList.contains('activesms')) {return}
                if(e.target.classList.contains('inpValid')) {
                    e.target.closest('.input__wrap').classList.remove('change') 
                    if(e.target.value == '')  {
                        e.target.closest('.input__wrap').classList.remove('sucses');
                        e.target.closest('.input__wrap').classList.add('error');
                    } else {
                        e.target.closest('.input__wrap').classList.remove('error');
                        e.target.closest('.input__wrap').classList.add('sucses')
                    }             
                }  
            })
           
           
            form.addEventListener('submit', function(event) {                
                [...inputs].forEach( input => {
                    
                    if(input.type != "submit") {
                    
                        input.closest('.input__wrap').classList.remove('error');
                        input.closest('.input__wrap').classList.remove('change');
                       
                        
                        if (input.value === '') {
                        event.preventDefault();
                        input.closest('.input__wrap').classList.add('error');
                       
                        
                        } 
                    }    
                })
            })
        }); // end ready 
    </script>
</body>

</html>